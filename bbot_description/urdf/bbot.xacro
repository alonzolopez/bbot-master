<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
    <!-- Import all Gazebo customization elements including colors-->
    <xacro:include filename="$(find bbot_description)/urdf/bbot.gazebo.xacro"/>
    <!-- Import Transmissions -->
    <xacro:include filename="$(find bbot_description)/urdf/bbot.transmission.xacro" />

    <!-- Include Utilities -->

    <!--Define properties-->
    <xacro:property name="safety_controller_k_pos" value="100" />
    <xacro:property name="safety_controller_k_vel" value="2" /> 
    <xacro:property name="joint_damping" value="0.5" />
    <xacro:property name="max_effort" value="300"/>
    <xacro:property name="max_velocity" value="10"/>


    <xacro:macro name="bbot" params="parent hardware_interface robot_name *origin">
        <!-- joint between parent (a.k.a. world) and link_0 -->
        <joint name="${parent}_${robot_name}_joint" type="fixed">
            <xacro:insert_block name="origin"/>
            <parent link="${parent}"/>
            <child link="${robot_name}_link_baseplate"/>
        </joint>

        <link name="${robot_name}_link_baseplate">
            <inertial>
                <origin xyz="0 0 0" rpy="${pi/2.0} 0 0"/>
                <mass value="0.0800"/>
                <inertia ixx="0.000070" ixy="0" ixz="0" iyy="0.000174" iyz="0" izz="0.000107"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0" rpy="${pi/2.0} 0 0"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/baseplate.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0 0 0" rpy="${pi/2.0} 0 0"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/baseplate.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_base_motor1" type="fixed">
            <parent link="${robot_name}_link_baseplate"/>
            <child link="${robot_name}_link_motor1"/>
            <origin xyz="0 0 0.0264" rpy="0 0 0"/>
        </joint>

        <link name="${robot_name}_link_motor1">
            <inertial>
                <origin xyz="0 0 0" rpy="0 0 ${pi/2.0}"/>
                <mass value="0.074"/>
                <inertia ixx="0.000031" ixy="0" ixz="0" iyy="0.000013" iyz="0" izz="0.000027"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0" rpy="0 0 ${pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_no_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </visual>

            <collision>
                <origin xyz="0 0 0" rpy="0 0 ${pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_no_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_1" type="revolute">
            <parent link="${robot_name}_link_motor1"/>
            <child link="${robot_name}_link1_2"/>
            <origin xyz="0 0 0.0205" rpy="0 0 0"/>
            <axis xyz="0 0 1"/>
            <limit lower="${-170 * pi / 180}" upper="${170 * pi / 180}"
                effort="${max_effort}" velocity="${max_velocity}" />
            <safety_controller soft_lower_limit="${-168 * pi / 180}"
                     soft_upper_limit="${168 * pi / 180}"
                     k_position="${safety_controller_k_pos}"
                     k_velocity="${safety_controller_k_vel}"/> 
            <dynamics damping="${joint_damping}"/>
        </joint>

        <link name="${robot_name}_link1_2">
            <inertial>
                <origin xyz="0 0 0" rpy="${pi/2.0} 0 ${pi/2.0}"/>
                <mass value="0.0296"/>
                <inertia ixx="0.000028" ixy="0" ixz="0" iyy="0.000014" iyz="0" izz="0.000023"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0" rpy="${pi/2.0} 0 ${pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/link1_2.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0 0 0" rpy="${pi/2.0} 0 ${pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/link1_2.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_link1_2_motor2" type="fixed">
            <parent link="${robot_name}_link1_2"/>
            <child link="${robot_name}_link_motor2"/>
            <origin xyz="0 0 0.045" rpy="${pi/2.0} ${-pi/2.0} 0"/>
        </joint>

        <link name="${robot_name}_link_motor2">
            <inertial>
                <origin xyz="0 0 0" rpy="0 0 ${-pi/2.0}"/>
                <mass value="0.076"/>
                <inertia ixx="0.000031" ixy="0" ixz="0" iyy="0.000014" iyz="0" izz="0.000027"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0" rpy="0 0 ${-pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </visual>

            <collision>
                <origin xyz="0 0 0" rpy="0 0 ${-pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_2" type="revolute">
            <parent link="${robot_name}_link_motor2"/>
            <child link="${robot_name}_link2_3"/>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <axis xyz="0 0 1"/>
            <limit lower="${-170 * pi / 180}" upper="${170 * pi / 180}"
                effort="${max_effort}" velocity="${max_velocity}" />
            <safety_controller soft_lower_limit="${-168 * pi / 180}"
                     soft_upper_limit="${168 * pi / 180}"
                     k_position="${safety_controller_k_pos}"
                     k_velocity="${safety_controller_k_vel}"/> 
            <dynamics damping="${joint_damping}"/>
        </joint>

        <link name="${robot_name}_link2_3">
            <inertial>
                <origin xyz="0.0275 0 0" rpy="${pi/2.0} ${-pi/2.0} 0"/>
                <mass value="0.0584"/>
                <inertia ixx="0.000096" ixy="0" ixz="0" iyy="0.000021" iyz="0" izz="0.00011"/>
            </inertial>

            <visual>
                <origin xyz="0.0275 0 0" rpy="${pi/2.0} ${-pi/2.0} 0"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/link2_3.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0.0275 0 0" rpy="${pi/2.0} ${-pi/2.0} 0"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/link2_3.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_3" type="revolute">
            <parent link="${robot_name}_link2_3"/>
            <child link="${robot_name}_link_motor3"/>
            <origin xyz="0.105 0 0" rpy="0 0 0"/>
            <axis xyz="0 0 1"/>
            <limit lower="${-170 * pi / 180}" upper="${170 * pi / 180}"
                effort="${max_effort}" velocity="${max_velocity}" />
            <safety_controller soft_lower_limit="${-168 * pi / 180}"
                     soft_upper_limit="${168 * pi / 180}"
                     k_position="${safety_controller_k_pos}"
                     k_velocity="${safety_controller_k_vel}"/> 
            <dynamics damping="${joint_damping}"/>
        </joint>

        <link name="${robot_name}_link_motor3">
            <inertial>
                <origin xyz="0 0 0" rpy="0 0 ${pi/2.0}"/>
                <mass value="0.076"/>
                <inertia ixx="0.000031" ixy="0" ixz="0" iyy="0.000014" iyz="0" izz="0.000027"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0" rpy="0 0 ${pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </visual>

            <collision>
                <origin xyz="0 0 0" rpy="0 0 ${pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_motor3_link3_4" type="fixed">
            <parent link="${robot_name}_link_motor3"/>
            <child link="${robot_name}_link3_4"/>
            <origin xyz="0 0 0" rpy="0 0 0"/>
        </joint>

        <link name="${robot_name}_link3_4">
            <inertial>
                <origin xyz="0.067 0 0.01" rpy="0 0 0"/>
                <mass value="0.0409"/>
                <inertia ixx="0.0027" ixy="-0.0001" ixz="0" iyy="0" iyz="0" izz="0.0027"/>
            </inertial>

            <visual>
                <origin xyz="0.067 0 0.01" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/link3_4.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0.067 0 0.01" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/link3_4.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_link3_4_motor4" type="fixed">
            <parent link="${robot_name}_link3_4"/>
            <child link="${robot_name}_link_motor4"/>
            <origin xyz="0.134 0 0" rpy="0 0 0"/>
        </joint>


        <link name="${robot_name}_link_motor4">
            <inertial>
                <origin xyz="0 0 0" rpy="0 0 ${-pi/2.0}"/>
                <mass value="0.076"/>
                <inertia ixx="0.000031" ixy="0" ixz="0" iyy="0.000014" iyz="0" izz="0.000027"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0" rpy="0 0 ${-pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </visual>

            <collision>
                <origin xyz="0 0 0" rpy="0 0 ${-pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_4" type="revolute">
            <parent link="${robot_name}_link_motor4"/>
            <child link="${robot_name}_link4_5"/>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <axis xyz="0 0 1"/>
            <limit lower="${-170 * pi / 180}" upper="${170 * pi / 180}"
                effort="${max_effort}" velocity="${max_velocity}" />
            <safety_controller soft_lower_limit="${-168 * pi / 180}"
                     soft_upper_limit="${168 * pi / 180}"
                     k_position="${safety_controller_k_pos}"
                     k_velocity="${safety_controller_k_vel}"/> 
            <dynamics damping="${joint_damping}"/>
        </joint>

        <link name="${robot_name}_link4_5">
            <inertial>
                <origin xyz="0 0 0.0235" rpy="0 0 0"/>
                <mass value="0.021"/>
                <inertia ixx="0.000016" ixy="0" ixz="0" iyy="0.000008" iyz="0" izz="0.00001"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0.0235" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/link4_5.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0 0 0.0235" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/link4_5.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_5" type="revolute">
            <parent link="${robot_name}_link4_5"/>
            <child link="${robot_name}_link_motor5"/>
            <origin xyz="0 0 0.0625" rpy="${pi/2.0} ${-pi/2.0} 0"/>
            <axis xyz="0 0 1"/>
            <limit lower="${-170 * pi / 180}" upper="${170 * pi / 180}"
                effort="${max_effort}" velocity="${max_velocity}" />
            <safety_controller soft_lower_limit="${-168 * pi / 180}"
                     soft_upper_limit="${168 * pi / 180}"
                     k_position="${safety_controller_k_pos}"
                     k_velocity="${safety_controller_k_vel}"/> 
            <dynamics damping="${joint_damping}"/>
        </joint>

        <link name="${robot_name}_link_motor5">
            <inertial>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <mass value="0.076"/>
                <inertia ixx="0.000031" ixy="0" ixz="0" iyy="0.000014" iyz="0" izz="0.000027"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </visual>

            <collision>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_motor5_link5_6" type="fixed">
            <parent link="${robot_name}_link_motor5"/>
            <child link="${robot_name}_link5_6"/>
            <origin xyz="0 -0.0371 0" rpy="0 0 0"/>
        </joint>

        <link name="${robot_name}_link5_6">
            <inertial>
                <origin xyz="0 0 0.0173" rpy="${pi/2.0} 0 ${pi/2.0}"/>
                <mass value="0.01588"/>
                <inertia ixx="0.00001" ixy="0.000002" ixz="0" iyy="0.000003" iyz="0" izz="0.000009"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0.0173" rpy="${pi/2.0} 0 ${pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/link5_6.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0 0 0.0173" rpy="${pi/2.0} 0 ${pi/2.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/link5_6.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <joint name="${robot_name}_joint_6" type="revolute">
            <parent link="${robot_name}_link5_6"/>
            <child link="${robot_name}_link_motor6"/>
            <origin xyz="0 -0.0332 0" rpy="${pi/2.0} 0 0"/>
            <axis xyz="0 0 1"/>
            <limit lower="${-170 * pi / 180}" upper="${170 * pi / 180}"
                effort="${max_effort}" velocity="${max_velocity}" />
            <safety_controller soft_lower_limit="${-168 * pi / 180}"
                     soft_upper_limit="${168 * pi / 180}"
                     k_position="${safety_controller_k_pos}"
                     k_velocity="${safety_controller_k_vel}"/> 
            <dynamics damping="${joint_damping}"/>
        </joint>

        <link name="${robot_name}_link_motor6">
            <inertial>
                <origin xyz="0 0 0" rpy="0 0 ${pi}"/>
                <mass value="0.076"/>
                <inertia ixx="0.000031" ixy="0" ixz="0" iyy="0.000014" iyz="0" izz="0.000027"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0" rpy="0 0 ${pi}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </visual>

            <collision>
                <origin xyz="0 0 0" rpy="0 0 ${pi}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </collision>
        </link>

        <!-- joint between motor6 and gripper_palm-->
        <joint name="${robot_name}_joint_motor6_gripper_palm" type="fixed">
            <parent link="${robot_name}_link_motor6"/>
            <child link="${robot_name}_gripper_palm"/>
            <origin xyz="0 0 0.015" rpy="0 0 0"/>
        </joint>
       <!-- link gripper_palm -->
        <link name="${robot_name}_gripper_palm">
            <inertial>
                <origin xyz="0 0.0175 0.008" rpy="${pi} 0 ${0.0}"/>
                <mass value="0.07825"/>
                <inertia ixx="0.00013" ixy="-0.000001" ixz="0" iyy="0.000141" iyz="-0.000015" izz="0.00003"/>
            </inertial>

            <visual>
                <origin xyz="0 0.0175 0.008" rpy="${pi} 0 ${0.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_palm.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0 0.0175 0.008" rpy="${pi} 0 ${0.0}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_palm.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <!-- joint between gripper_palm and motor7 -->
        <joint name="${robot_name}_joint_gripper_palm_motor7" type="fixed">
            <parent link="${robot_name}_gripper_palm"/>
            <child link="${robot_name}_link_motor7"/>
            <origin xyz="-0.0305 -0.0065 0.0215" rpy="0 0 0"/>
        </joint>

        <!-- motor 7 -->
        <link name="${robot_name}_link_motor7">
            <inertial>
                <origin xyz="0.015 -0.0115 0.0295" rpy="${pi/2} 0 ${pi}"/>
                <mass value="0.076"/>
                <inertia ixx="0.000031" ixy="0" ixz="0" iyy="0.000014" iyz="0" izz="0.000027"/>
            </inertial>

            <visual>
                <origin xyz="0.015 -0.0115 0.0295" rpy="${pi/2} 0 ${pi}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </visual>

            <collision>
                <origin xyz="0.015 -0.0115 0.0295" rpy="${pi/2} 0 ${pi}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/motor_with_idler.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Black"/>
            </collision>
        </link>

        <!-- joint between motor 7 and link_claw1-->
        <joint name="${robot_name}_joint_7" type="revolute">
            <parent link="${robot_name}_link_motor7"/>
            <child link="${robot_name}_link_claw1"/>
            <origin xyz="0.015 0.009 0.0295" rpy="${-pi/2} 0 0"/>
            <axis xyz="0 0 1"/>
            <limit lower="${-170 * pi / 180}" upper="${170 * pi / 180}"
                effort="${max_effort}" velocity="${max_velocity}" />
            <safety_controller soft_lower_limit="${-168 * pi / 180}"
                     soft_upper_limit="${168 * pi / 180}"
                     k_position="${safety_controller_k_pos}"
                     k_velocity="${safety_controller_k_vel}"/> 
            <dynamics damping="${joint_damping}"/>
        </joint>

        <!-- link_claw1 -->
        <link name="${robot_name}_link_claw1">
            <inertial>
                <origin xyz="0 0 0" rpy="0 0 ${pi}"/>
                <mass value="0.0065"/>
                <inertia ixx="0.000003" ixy="0.000003" ixz="0" iyy="0.000003" iyz="0" izz="0.000006"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0" rpy="0 0 ${pi}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link1_right.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0 0 0" rpy="0 0 ${pi}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link1_right.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <!-- joint between link_claw1 and link_claw1_end-->
        <joint name="${robot_name}_joint_claw1_claw1_end" type="fixed">
            <parent link="${robot_name}_link_claw1"/>
            <child link="${robot_name}_link_claw1_end"/>
            <origin xyz="-0.03677 -0.03677 -0.00825" rpy="0 0 0"/>
        </joint>

        <!-- link_claw1_end -->
        <link name="${robot_name}_link_claw1_end">
            <inertial>
                <origin xyz="0.01175 -0.0276 0.00325" rpy="${pi/2} 0 1.903"/>
                <mass value="0.006"/>
                <inertia ixx="0" ixy="0" ixz="0" iyy="0.000003" iyz="0" izz="0.000003"/>
            </inertial>

            <visual>
                <origin xyz="0.01175 -0.0276 0.00325" rpy="${pi/2} 0 1.903"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link3.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0.01175 -0.0276 0.00325" rpy="${pi/2} 0 1.903"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link3.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <!-- joint between link_claw1_end and link_claw1_2-->
        <joint name="${robot_name}_joint_claw1_end_claw1_2" type="fixed">
            <parent link="${robot_name}_link_claw1_end"/>
            <child link="${robot_name}_link_claw1_2"/>
            <origin xyz="0.0098 -0.023 0.00025" rpy="0 0 0"/>
        </joint>

        <!-- link_claw1_2 -->
        <link name="${robot_name}_link_claw1_2">
            <inertial>
                <origin xyz="0.01839 0.01693 0.0135" rpy="${-pi/2} 0 -2.3057"/>
                <mass value=".00455"/>
                <inertia ixx="0" ixy="0" ixz="0" iyy="0.000001" iyz="0" izz="0.000001"/>
            </inertial>

            <visual>
                <origin xyz="0.01839 0.01693 0.0135" rpy="${-pi/2} 0 -2.3057"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link2.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0.01839 0.01693 0.0135" rpy="${-pi/2} 0 -2.3057"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link2.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <!-- joint between link_claw1 and link_claw2-->
        <joint name="${robot_name}_joint_claw1_claw2" type="revolute">
            <parent link="${robot_name}_link_claw1"/>
            <child link="${robot_name}_link_claw2"/>
            <origin xyz="0.03 0 0" rpy="0 0 0"/>
            <axis xyz="0 0 1"/>
            <limit lower="${-170 * pi / 180}" upper="${170 * pi / 180}"
                effort="${max_effort}" velocity="${max_velocity}" />
            <safety_controller soft_lower_limit="${-168 * pi / 180}"
                     soft_upper_limit="${168 * pi / 180}"
                     k_position="${safety_controller_k_pos}"
                     k_velocity="${safety_controller_k_vel}"/> 
            <dynamics damping="${joint_damping}"/>
            <mimic joint="${robot_name}_joint_7" multiplier="-1.0" offset = "0.0"/>
        </joint>

        <xacro:mimic_joint_plugin_gazebo name_prefix="${robot_name}_joint_claw1_claw2"
            parent_joint="${robot_name}_joint_7" 
            mimic_joint="${robot_name}_joint_claw1_claw2"
            has_pid="true" multiplier="-1.0" max_effort="${max_effort}" />

        <!-- link_claw2 -->
        <link name="${robot_name}_link_claw2">
            <inertial>
                <origin xyz="0 0 0.005" rpy="0 ${pi} ${pi}"/>
                <mass value=".0066"/>
                <inertia ixx="0.000004" ixy="0.000003" ixz="0" iyy="0.000002" iyz="0.000001" izz="0.000006"/>
            </inertial>

            <visual>
                <origin xyz="0 0 0.005" rpy="0 ${pi} ${pi}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link1_left.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="0 0 0.005" rpy="0 ${pi} ${pi}"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link1_left.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <!-- joint between link_claw2 and link_claw2_end-->
        <joint name="${robot_name}_joint_claw2_claw2_end" type="fixed">
            <parent link="${robot_name}_link_claw2"/>
            <child link="${robot_name}_link_claw2_end"/>
            <origin xyz="0.03581 -0.0377 -0.0085" rpy="0 0 0"/>
        </joint>

        <!-- link_claw2_end -->
        <link name="${robot_name}_link_claw2_end">
            <inertial>
                <origin xyz="-0.01181 -0.02758 0.0085" rpy="${pi/2} ${pi} -1.903"/>
                <mass value="0.006"/>
                <inertia ixx="0" ixy="0" ixz="0" iyy="0.000003" iyz="0" izz="0.000003"/>
            </inertial>

            <visual>
                <origin xyz="-0.01181 -0.02758 0.0085" rpy="${pi/2} ${pi} -1.903"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link3.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="-0.01181 -0.02758 0.0085" rpy="${pi/2} ${pi} -1.903"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link3.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <!-- joint between link_claw2_end and link_claw2_2-->
        <joint name="${robot_name}_joint_claw1_end_claw2_2" type="fixed">
            <parent link="${robot_name}_link_claw2_end"/>
            <child link="${robot_name}_link_claw2_2"/>
            <origin xyz="-0.00984 -0.02298 0" rpy="0 0 0"/>
        </joint>

        <!-- link_claw2_2 -->
        <link name="${robot_name}_link_claw2_2">
            <inertial>
                <origin xyz="-0.01699 0.01834 0.0135" rpy="${pi/2} ${pi} 2.3057"/>
                <mass value=".00455"/>
                <inertia ixx="0" ixy="0" ixz="0" iyy="0.000001" iyz="0" izz="0.000001"/>
            </inertial>

            <visual>
                <origin xyz="-0.01699 0.01834 0.0135" rpy="${pi/2} ${pi} 2.3057"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link2.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </visual>

            <collision>
                <origin xyz="-0.01699 0.01834 0.0135" rpy="${pi/2} ${pi} 2.3057"/>
                <geometry>
                    <mesh filename="package://bbot_description/meshes/gripper_link2.stl" scale="0.001 0.001 0.001"/>
                </geometry>
                <material name="Orange"/>
            </collision>
        </link>

        <xacro:bbot_gazebo robot_name="${robot_name}"/>
        <xacro:bbot_transmission hardware_interface="${hardware_interface}"/>
    </xacro:macro>

</robot>